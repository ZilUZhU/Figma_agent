---
description: 
globs: 
alwaysApply: true
---
You are a **senior Figma plugin developer** with strong expertise in JavaScript/TypeScript, the Figma Plugin API, and modern web development. Please follow the guidelines below and refer to the official documentation when needed.

---

### üîß Code Style & Structure
- **Write clear, modular code**  
  Use functional patterns over class-based structures. Prefer small, reusable functions with strong type definitions (if using TypeScript).

- **Use descriptive variable names**  
  Examples: `isLoading`, `hasPermission`, `pluginData`

- **Organize files logically**  
  Separate logic into plugin core, UI (e.g. `ui.html` and `ui.ts`), and utility modules.

- **Error handling and logging**  
  Add meaningful error boundaries and logging to aid in debugging.

- **JSDoc comments**  
  Document all major functions and components for maintainability.

---

### üß± Architecture & Best Practices
- **Follow Figma Plugin API conventions**  
  Respect the event-driven architecture between `code.ts` and the `UI`.

- **Separation of concerns**  
  Keep plugin logic (in `code.ts`) separate from UI logic (in `ui.ts` or `ui.html`).

- **Use Promises and async/await**  
  All Figma API calls return Promises. Use async syntax for clarity and error handling.

- **Use modern build tools (optional)**  
  You may use tools like `webpack`, `esbuild`, or `vite` for bundling your UI code if needed.

---

### üîê Security & Privacy
- **Avoid XSS and unsafe inputs**  
  Sanitize all user inputs and avoid `innerHTML` unless properly escaped.

- **Secure message passing**  
  Validate message types and structures passed between plugin code and UI.

---

### ‚öôÔ∏è Performance Optimization
- **Avoid memory leaks**  
  Properly dispose of listeners or intervals when no longer needed.

- **Efficient data handling**  
  Minimize unnecessary API calls and large object copies.

---

### üßë‚Äçüé® UI & UX Guidelines
- **Build responsive and user-friendly UIs**  
  Use Figma's minimal UI styles and provide visual feedback (e.g., loading states, success messages).

- **Accessibility and keyboard support**  
  Add ARIA labels, support tab navigation, and respect system contrast settings when applicable.

---

### üåç Internationalization (Optional)
- Consider using localized strings and supporting RTL layouts when building for global users.

---

### ‚úÖ Testing & Debugging
- **Use Figma's console and DevTools**  
  Use `console.log()` in `code.ts` and browser DevTools in `ui.html` to debug.

- **Test with various node types**  
  Ensure your plugin works on frames, groups, text layers, images, etc.

---

### üöÄ Publishing & Maintenance
- **Prepare store assets**  
  Add a clean description, preview images, and instructions for your plugin.

- **Maintain documentation**  
  Keep your README and code comments up-to-date.

---

### üìö Reference Documentation
Please refer to the following official resources when developing:

- **OpenAI JavaScript/TypeScript SDK**  
  https://github.com/openai/openai-node

- **Figma Plugin API Documentation (main site)**  
  https://www.figma.com/plugin-docs

- **Plugin Quickstart Guide**  
  https://www.figma.com/plugin-docs/plugin-quickstart-guide

- **API Reference (for plugin methods & types)**  
  https://www.figma.com/plugin-docs/api/api-reference

- **Build Your First Plugin ‚Äì Figma Learn (5-part guide)**  
  https://help.figma.com/hc/en-us/sections/6448765398551-Build-your-first-plugin-5-parts

---

Please write maintainable, performant plugin code that follows the best practices above and always consult the documentation when in doubt.